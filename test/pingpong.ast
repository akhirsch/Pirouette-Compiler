helper
  curr :=
  let
    Pong.x := [Ping] Ping.(curr) ~> Pong;
  in
    let
      Pong.y := Pong.(x - 1);
    in
      let
        Ping.x := [Pong] Pong.(y) ~> Ping;
      in
        if
          Ping.(x > 0)
        then
          Ping[L] ~> Pong; Ping.(helper) Ping.(x)
        else
          Ping[R] ~> Pong; Ping.(print_endline) Ping.("done");
main := let
          Ping.x := Ping.(100);
        in
          Ping.(helper) Ping.(x);
